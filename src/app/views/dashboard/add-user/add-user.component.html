<div class="">
  <div fxLayout="row wrap">
    <div fxFlex="100" fxFlex.gt-md="100" fxFlex.md="100">
      <mat-card class="p-24">
        <div fxLayout="row wrap">
          <div fxFlex="100">
            <mat-horizontal-stepper [linear]="true">
              <mat-step [stepControl]="addEditUserFormGroup">
                <form [formGroup]="addEditUserFormGroup">
                  <ng-template matStepLabel
                    >Saisie des informations de l'utilisateur</ng-template
                  >
                  <div fxLayout="row wrap">
                    <div fxFlex="100" fxFlex.gt-xs="100" class="pr-16">
                      <div class="pb-16 mb-16">
                        <h2>Uploader votre photo de profile</h2>

                        <div class="row">
                          <div class="col">
                            <app-profile-picture
                              [form]="addEditUserFormGroup"
                              [photo]="addEditUserFormGroup.get('photo')"
                              [editmode]="editEnabled"
                            ></app-profile-picture>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <button
                              mat-icon-button
                              mat-sm-button
                              color="warn"
                              (click)="clear()"
                            >
                              <mat-icon>delete</mat-icon>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div fxFlex="100" fxFlex.gt-xs="50" class="pr-16">
                      <div class="pb-16">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            name="nom"
                            formControlName="nom"
                            placeholder="Votre nom"
                            value=""
                          />
                        </mat-form-field>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls['nom'].hasError(
                              'minlength'
                            ) && addEditUserFormGroup.controls['nom'].touched
                          "
                          class="form-error-msg"
                        >
                          Le nom doit avoir au moins
                          {{
                            addEditUserFormGroup.controls["nom"].errors
                              .minlength.requiredLength
                          }}
                          caracteres
                        </small>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls['nom'].hasError(
                              'maxlength'
                            ) && addEditUserFormGroup.controls['nom'].touched
                          "
                          class="form-error-msg"
                        >
                          Le nom ne doit pas contenir plus de
                          {{
                            addEditUserFormGroup.controls["nom"].errors
                              .maxlength.requiredLength
                          }}
                          caracteres
                        </small>
                      </div>

                      <div class="pb-16">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            name="prenom"
                            formControlName="prenom"
                            placeholder="Votre prénom"
                            value=""
                          />
                        </mat-form-field>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls['prenom'].hasError(
                              'minlength'
                            ) && addEditUserFormGroup.controls['prenom'].touched
                          "
                          class="form-error-msg"
                        >
                          Le prenom doit avoir une longueur minimale de
                          {{
                            addEditUserFormGroup.controls["prenom"].errors
                              .minlength.requiredLength
                          }}
                          caracteres
                        </small>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls['prenom'].hasError(
                              'maxlength'
                            ) && addEditUserFormGroup.controls['prenom'].touched
                          "
                          class="form-error-msg"
                        >
                          Le prenom ne doit pas contenir plus de
                          {{
                            addEditUserFormGroup.controls["prenom"].errors
                              .maxlength.requiredLength
                          }}
                          caracteres
                        </small>
                      </div>
                      <div class="pb-16">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            name="userName"
                            formControlName="userName"
                            placeholder="Votre nom d'utilisateur"
                            required
                            value=""
                          />
                        </mat-form-field>
                      </div>

                      <div class="pb-16" *ngIf="!edition">
                        <mat-form-field class="full-width">
                          <input
                            type="password"
                            name="motDePasse"
                            matInput
                            formControlName="motDePasse"
                            placeholder="votre mot de passe"
                            value=""
                          />
                        </mat-form-field>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls[
                              'motDePasse'
                            ].hasError('required') &&
                            addEditUserFormGroup.controls['motDePasse'].touched
                          "
                          class="form-error-msg"
                        >
                          Le mot de passe est obligatoire
                        </small>
                      </div>

                      <div class="pb-16" *ngIf="!edition">
                        <mat-form-field class="full-width">
                          <input
                            type="password"
                            name="confirmPassword"
                            matInput
                            appEqualValidator="password"
                            formControlName="confirmPassword"
                            placeholder="Confirm Password"
                            value=""
                          />
                        </mat-form-field>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls[
                              'confirmPassword'
                            ].hasError('equalTo')
                          "
                          class="form-error-msg"
                        >
                          Les deux mots de passe ne correspondent pas
                        </small>
                      </div>
                    </div>

                    <div fxFlex="100" fxFlex.gt-xs="50">
                      <div class="pb-16">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="email"
                            name="email"
                            formControlName="email"
                            placeholder="Your Email"
                            value=""
                          />
                        </mat-form-field>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls['email'].hasError(
                              'required'
                            ) && addEditUserFormGroup.controls['email'].touched
                          "
                          class="form-error-msg"
                        >
                          Email is required
                        </small>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls['email'].hasError(
                              'email'
                            ) && addEditUserFormGroup.controls['email'].touched
                          "
                          class="form-error-msg"
                        >
                          Invaild email address
                        </small>
                      </div>

                      <div class="pb-16">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            name="dateNaissance"
                            formControlName="dateNaissance"
                            placeholder="Date de naissance"
                            [matDatepicker]="appDatepicker"
                          />

                          <mat-datepicker-toggle
                            matSuffix
                            [for]="appDatepicker"
                          ></mat-datepicker-toggle>
                        </mat-form-field>
                        <mat-datepicker #appDatepicker></mat-datepicker>
                      </div>
                      <div class="pb-16">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            placeholder="Telepone"
                            formControlName="phone"
                            required
                          />
                        </mat-form-field>
                      </div>
                      <div class="pb-16">
                        <Label id="genre">Genre*</Label><br />
                        <mat-radio-group
                          name="genre"
                          aria-labelledby="genre"
                          class="radio-group"
                          formControlName="genre"
                        >
                          <mat-radio-button class="radio-button" value="M">{{
                            "MALE" | translate
                          }}</mat-radio-button>
                          <mat-radio-button value="F">{{
                            "FEMALE" | translate
                          }}</mat-radio-button>
                        </mat-radio-group>
                      </div>

                      <div class="pb-16 pt-8">
                        <mat-checkbox
                          name="agreed"
                          formControlName="agreed"
                          class="pb-16"
                        >
                          {{ "ACCEPT MESSAGE" | translate }}
                        </mat-checkbox>
                        <small
                          *ngIf="
                            addEditUserFormGroup.controls['agreed'].hasError(
                              'agreed'
                            ) && addEditUserFormGroup.controls['agreed'].touched
                          "
                          class="form-error-msg"
                        >
                          {{ "ACCEPT ERROR" | translate }}
                        </small>
                      </div>
                    </div>
                  </div>
                  <button
                    mat-raised-button
                    color="primary"
                    matStepperNext
                    [disabled]="addEditUserFormGroup.invalid"
                  >
                    {{ "SUBMIT" | translate }}
                  </button>
                </form>
              </mat-step>
              <mat-step>
                <ng-template matStepLabel>Recapitulatif</ng-template>
                <div fxLayout="row wrap">
                  <div fxFlex="100" fxFlex.gt-xs="100" class="pr-16">
                    <div class="pb-16 mb-16">
                      <img
                        *ngIf="addEditUserFormGroup.value?.photo"
                        width="300"
                        height="300"
                        src="{{ addEditUserFormGroup.value?.photo }}"
                      />
                    </div>
                  </div>
                  <div fxFlex="100" fxFlex.gt-xs="50" class="pr-16">
                    <div class="pb-16">
                      <div class="pb-16 mb-16">
                        <label>Nom et prénom : </label>
                        {{ addEditUserFormGroup.value?.nom }}
                        {{ addEditUserFormGroup.value?.prenom }}
                      </div>
                      <div class="pb-16 mb-16">
                        <label>Date de naissance: </label>
                        {{
                          addEditUserFormGroup.value?.dateNaissance
                            | date: "dd/MM/yyyy"
                        }}
                      </div>
                      <div class="pb-16 mb-16">
                        <label>Genre: </label>
                        {{ addEditUserFormGroup.value?.genre }}
                      </div>
                    </div>
                  </div>
                  <div class="pb-16">
                    <div class="pb-16 mb-16">
                      <label>Email : </label>
                      {{ addEditUserFormGroup.value?.email }}
                    </div>
                    <div class="pb-16 mb-16">
                      <label>Identifiant: </label>
                      {{ addEditUserFormGroup.value?.userName }}
                    </div>

                    <div class="pb-16 mb-16">
                      <label>Telephone: </label>
                      {{ addEditUserFormGroup.value?.phone }}
                    </div>
                  </div>
                </div>
                <div fxLayout="row">
                  <button mat-raised-button color="accent" matStepperPrevious>
                    {{ "BACK" | translate }}
                  </button>
                  <span fxFlex="8px"></span>
                  <button mat-raised-button color="primary" (click)="submit()">
                    {{ "SUBMIT" | translate }}
                  </button>
                </div>
              </mat-step>
            </mat-horizontal-stepper>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>
