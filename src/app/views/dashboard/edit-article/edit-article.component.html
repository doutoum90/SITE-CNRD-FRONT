<div class="">
  <div fxLayout="row wrap">
    <div fxFlex="100" fxFlex.gt-md="100" fxFlex.md="100">
      <mat-card class="p-24">
        <div fxLayout="row wrap">
          <div fxFlex="100">
            <mat-horizontal-stepper [linear]="true">
              <mat-step [stepControl]="editPostFormGroup">
                <form [formGroup]="editPostFormGroup">
                  <ng-template matStepLabel
                    >Saisie des details de l'article</ng-template
                  >
                  <div fxLayout="row wrap">
                    <div fxFlex="100" fxFlex.gt-xs="50" class="pr-16">
                      <div class="pb-16 mb-16">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            placeholder="Un super titre d'article"
                            formControlName="title"
                            required
                          />
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxFlex="100" fxFlex.gt-xs="50" class="pr-16">
                      <div class="pb-16 mb-16">
                        <mat-form-field class="full-width">
                          <mat-label>Categories</mat-label>
                          <mat-select
                            [formControl]="categoryFormControl"
                            multiple
                          >
                            <mat-select-trigger>
                              {{
                                categoryFormControl?.value
                                  ? categoryFormControl?.value[0]
                                  : ""
                              }}
                              <span
                                *ngIf="categoryFormControl?.value?.length > 1"
                                class="example-additional-selection"
                              >
                                (+{{ categoryFormControl?.value.length - 1 }}
                                {{
                                  categoryFormControl.value?.length === 2
                                    ? "other"
                                    : "others"
                                }})
                              </span>
                            </mat-select-trigger>

                            <mat-optgroup
                              *ngFor="let cat of categories$ | async"
                              [label]="cat?.libelles"
                            >
                              <mat-option
                                *ngFor="let subCat of cat?.subs"
                                [value]="subCat._id"
                              >
                                {{ subCat.libelles }}
                              </mat-option>
                              <mat-option
                                *ngFor="let subCat of cat?.subs"
                                [value]="subCat._id"
                              >
                                {{ subCat.libelles }}
                              </mat-option>

                              <!-- <ng-template #cat>

                              </ng-template>

                              <ng-template #subcat>

                              </ng-template> -->
                            </mat-optgroup>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxFlex="100" fxFlex.gt-xs="100">
                      <div class="pb-16 mb-16">
                        <mat-card class="p-0">
                          <mat-card-content class="p-0">
                            <quill-editor
                              name="content"
                              formControlName="content"
                              ngDefaultControl
                              theme="snow"
                              (onContentChanged)="onContentChanged()"
                              onSelectionChanged="onSelectionChanged()"
                            >
                            </quill-editor>
                          </mat-card-content>
                        </mat-card>
                      </div>
                    </div>
                  </div>

                  <div>
                    <button mat-raised-button color="primary" matStepperNext>
                      {{ "NEXT" | translate }}
                    </button>
                  </div>
                </form>
              </mat-step>

              <mat-step>
                <ng-template matStepLabel>Recapitulatif</ng-template>
                <div fxLayout="row wrap">
                  <div fxFlex="100" fxFlex.gt-xs="100" class="pr-16">
                    <mat-card>
                      <mat-card-title>{{
                        editPostFormGroup.value?.title
                      }}</mat-card-title>
                      <p [innerHtml]="editPostFormGroup.value?.content"></p>
                    </mat-card>
                  </div>
                </div>

                <div fxLayout="row">
                  <button mat-raised-button color="accent" matStepperPrevious>
                    {{ "BACK" | translate }}
                  </button>
                  <span fxFlex="8px"></span>
                  <button mat-raised-button color="primary" (click)="submit()">
                    {{ "SUBMIT" | translate }}
                  </button>
                </div>
              </mat-step>
            </mat-horizontal-stepper>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>
